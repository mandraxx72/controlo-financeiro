<!DOCTYPE html>
<html lang="pt-BR">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Controlo Financeiro | Gestão de Orçamento Pessoal</title>
    <meta name="description" content="Aplicativo simples e privado para controlar receitas e despesas pessoais">
    <meta name="theme-color" content="#00d4ff">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <link rel="manifest" href="manifest.json">
    <link rel="apple-touch-icon" href="icons/icon-192.png">
    <link rel="stylesheet" href="css/styles.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
</head>

<body>
    <div class="app-container">
        <!-- Sidebar -->
        <aside class="sidebar" id="sidebar">
            <div class="sidebar-header">
                <div class="logo">
                    <svg class="logo-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M12 2L2 7l10 5 10-5-10-5z" />
                        <path d="M2 17l10 5 10-5" />
                        <path d="M2 12l10 5 10-5" />
                    </svg>
                    <span class="logo-text">Controlo Financeiro</span>
                </div>
                <button class="sidebar-toggle" id="sidebarToggle" aria-label="Toggle menu">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <line x1="3" y1="12" x2="21" y2="12" />
                        <line x1="3" y1="6" x2="21" y2="6" />
                        <line x1="3" y1="18" x2="21" y2="18" />
                    </svg>
                </button>
            </div>

            <nav class="sidebar-nav">
                <a href="#" class="nav-item active" data-section="dashboard">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <rect x="3" y="3" width="7" height="9" />
                        <rect x="14" y="3" width="7" height="5" />
                        <rect x="14" y="12" width="7" height="9" />
                        <rect x="3" y="16" width="7" height="5" />
                    </svg>
                    <span>Dashboard</span>
                </a>
                <a href="#" class="nav-item" data-section="transactions">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <line x1="12" y1="1" x2="12" y2="23" />
                        <path d="M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6" />
                    </svg>
                    <span>Transações</span>
                </a>
                <a href="#" class="nav-item" data-section="budgets">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M12 20V10" />
                        <path d="M18 20V4" />
                        <path d="M6 20v-4" />
                    </svg>
                    <span>Metas</span>
                </a>
                <a href="#" class="nav-item" data-section="wallets">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <rect x="1" y="4" width="22" height="16" rx="2" ry="2" />
                        <line x1="1" y1="10" x2="23" y2="10" />
                    </svg>
                    <span>Carteiras</span>
                </a>
                <a href="#" class="nav-item" data-section="calendar">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <rect x="3" y="4" width="18" height="18" rx="2" ry="2" />
                        <line x1="16" y1="2" x2="16" y2="6" />
                        <line x1="8" y1="2" x2="8" y2="6" />
                        <line x1="3" y1="10" x2="21" y2="10" />
                    </svg>
                    <span>Calendário</span>
                </a>
                <a href="#" class="nav-item" data-section="categories">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M20.59 13.41l-7.17 7.17a2 2 0 0 1-2.83 0L2 12V2h10l8.59 8.59a2 2 0 0 1 0 2.82z" />
                        <line x1="7" y1="7" x2="7.01" y2="7" />
                    </svg>
                    <span>Categorias</span>
                </a>
            </nav>

            <div class="sidebar-footer">
                <button class="theme-toggle" id="themeToggle" aria-label="Toggle theme">
                    <svg class="sun-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <circle cx="12" cy="12" r="5" />
                        <line x1="12" y1="1" x2="12" y2="3" />
                        <line x1="12" y1="21" x2="12" y2="23" />
                        <line x1="4.22" y1="4.22" x2="5.64" y2="5.64" />
                        <line x1="18.36" y1="18.36" x2="19.78" y2="19.78" />
                        <line x1="1" y1="12" x2="3" y2="12" />
                        <line x1="21" y1="12" x2="23" y2="12" />
                        <line x1="4.22" y1="19.78" x2="5.64" y2="18.36" />
                        <line x1="18.36" y1="5.64" x2="19.78" y2="4.22" />
                    </svg>
                    <svg class="moon-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z" />
                    </svg>
                    <span>Alternar Tema</span>
                </button>
            </div>
        </aside>

        <!-- Mobile Header -->
        <header class="mobile-header" id="mobileHeader">
            <button class="menu-btn" id="menuBtn" aria-label="Open menu">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <line x1="3" y1="12" x2="21" y2="12" />
                    <line x1="3" y1="6" x2="21" y2="6" />
                    <line x1="3" y1="18" x2="21" y2="18" />
                </svg>
            </button>
            <h1 class="mobile-title">Controlo Financeiro</h1>
            <button class="theme-toggle-mobile" id="themeToggleMobile" aria-label="Toggle theme">
                <svg class="sun-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <circle cx="12" cy="12" r="5" />
                    <line x1="12" y1="1" x2="12" y2="3" />
                    <line x1="12" y1="21" x2="12" y2="23" />
                    <line x1="4.22" y1="4.22" x2="5.64" y2="5.64" />
                    <line x1="18.36" y1="18.36" x2="19.78" y2="19.78" />
                    <line x1="1" y1="12" x2="3" y2="12" />
                    <line x1="21" y1="12" x2="23" y2="12" />
                    <line x1="4.22" y1="19.78" x2="5.64" y2="18.36" />
                    <line x1="18.36" y1="5.64" x2="19.78" y2="4.22" />
                </svg>
                <svg class="moon-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z" />
                </svg>
            </button>
        </header>

        <!-- Main Content -->
        <main class="main-content" id="mainContent">
            <!-- Dashboard Section -->
            <section class="section active" id="dashboardSection">
                <div class="section-header">
                    <h2 class="section-title">Dashboard</h2>
                    <div class="month-selector">
                        <button class="month-nav prev" id="prevMonth" aria-label="Mês anterior">
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <polyline points="15 18 9 12 15 6" />
                            </svg>
                        </button>
                        <span class="current-month" id="currentMonth">Janeiro 2026</span>
                        <button class="month-nav next" id="nextMonth" aria-label="Próximo mês">
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <polyline points="9 18 15 12 9 6" />
                            </svg>
                        </button>
                    </div>
                </div>

                <!-- Summary Cards -->
                <div class="summary-cards">
                    <div class="summary-card income">
                        <div class="card-icon">
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <line x1="12" y1="19" x2="12" y2="5" />
                                <polyline points="5 12 12 5 19 12" />
                            </svg>
                        </div>
                        <div class="card-content">
                            <span class="card-label">Receitas</span>
                            <span class="card-value" id="totalIncome">€0,00</span>
                        </div>
                    </div>
                    <div class="summary-card expense">
                        <div class="card-icon">
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <line x1="12" y1="5" x2="12" y2="19" />
                                <polyline points="19 12 12 19 5 12" />
                            </svg>
                        </div>
                        <div class="card-content">
                            <span class="card-label">Despesas</span>
                            <span class="card-value" id="totalExpenses">€0,00</span>
                        </div>
                    </div>
                    <div class="summary-card balance">
                        <div class="card-icon">
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <rect x="1" y="4" width="22" height="16" rx="2" ry="2" />
                                <line x1="1" y1="10" x2="23" y2="10" />
                            </svg>
                        </div>
                        <div class="card-content">
                            <span class="card-label">Saldo</span>
                            <span class="card-value" id="balance">€0,00</span>
                        </div>
                    </div>
                </div>

                <!-- Comparison & Highlights -->
                <div class="highlights-container">
                    <div class="highlight-card comparison">
                        <h4 class="highlight-title">Comparativo com Mês Anterior</h4>
                        <div class="comparison-grid" id="comparisonGrid">
                            <!-- Comparison data will be rendered here -->
                        </div>
                    </div>
                    <div class="highlight-card top-expense">
                        <h4 class="highlight-title">Maior Despesa do Mês</h4>
                        <div class="top-expense-content" id="topExpenseContent">
                            <!-- Top expense will be rendered here -->
                        </div>
                    </div>
                </div>

                <!-- Charts -->
                <div class="charts-container">
                    <div class="chart-card">
                        <h3 class="chart-title">Receitas vs Despesas (6 meses)</h3>
                        <div class="chart-wrapper">
                            <canvas id="barChart"></canvas>
                        </div>
                    </div>
                    <div class="chart-card">
                        <h3 class="chart-title">Despesas por Categoria</h3>
                        <div class="chart-wrapper">
                            <canvas id="pieChart"></canvas>
                        </div>
                        <div class="chart-legend" id="pieLegend"></div>
                    </div>
                </div>

                <!-- Budget Progress -->
                <div class="budget-progress-section" id="budgetProgressSection">
                    <div class="section-header">
                        <h3 class="subsection-title">Metas de Orçamento</h3>
                    </div>
                    <div class="budget-progress-list" id="budgetProgressList">
                        <!-- Budget progress will be rendered here -->
                    </div>
                </div>

                <!-- Recent Transactions -->
                <div class="recent-transactions">
                    <div class="section-header">
                        <h3 class="subsection-title">Transações Recentes</h3>
                        <button class="btn btn-primary" id="addTransactionBtn">
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <line x1="12" y1="5" x2="12" y2="19" />
                                <line x1="5" y1="12" x2="19" y2="12" />
                            </svg>
                            <span>Nova Transação</span>
                        </button>
                    </div>
                    <div class="transactions-list" id="recentTransactions">
                        <!-- Transactions will be rendered here -->
                    </div>
                </div>
            </section>

            <!-- Transactions Section -->
            <section class="section" id="transactionsSection">
                <div class="section-header">
                    <h2 class="section-title">Transações</h2>
                    <div class="section-actions">
                        <div class="filter-group">
                            <select id="filterType" class="select-input">
                                <option value="all">Todas</option>
                                <option value="income">Receitas</option>
                                <option value="expense">Despesas</option>
                            </select>
                            <select id="filterCategory" class="select-input">
                                <option value="all">Todas Categorias</option>
                            </select>
                        </div>
                        <div class="filter-group advanced-filters">
                            <input type="text" id="searchQuery" class="text-input search-input"
                                placeholder="Pesquisar por nota...">
                            <input type="date" id="filterDateFrom" class="text-input date-input" title="Data inicial">
                            <input type="date" id="filterDateTo" class="text-input date-input" title="Data final">
                            <button class="btn btn-ghost" id="clearFilters" title="Limpar Filtros">
                                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <line x1="18" y1="6" x2="6" y2="18" />
                                    <line x1="6" y1="6" x2="18" y2="18" />
                                </svg>
                            </button>
                        </div>
                        <button class="btn btn-secondary" id="exportCSVBtn">
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4" />
                                <polyline points="7 10 12 15 17 10" />
                                <line x1="12" y1="15" x2="12" y2="3" />
                            </svg>
                            <span>CSV</span>
                        </button>
                        <button class="btn btn-secondary" id="backupBtn">
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <path d="M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z" />
                                <polyline points="17 21 17 13 7 13 7 21" />
                                <polyline points="7 3 7 8 15 8" />
                            </svg>
                            <span>Backup</span>
                        </button>
                        <button class="btn btn-secondary" id="restoreBtn">
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <path d="M3 15v4a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-4" />
                                <polyline points="17 8 12 3 7 8" />
                                <line x1="12" y1="3" x2="12" y2="15" />
                            </svg>
                            <span>Restaurar</span>
                        </button>
                        <input type="file" id="restoreFileInput" accept=".json" style="display: none;">
                        <button class="btn btn-primary" id="addTransactionBtn2">
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <line x1="12" y1="5" x2="12" y2="19" />
                                <line x1="5" y1="12" x2="19" y2="12" />
                            </svg>
                            <span>Nova Transação</span>
                        </button>
                    </div>
                </div>
                <div class="transactions-table-container">
                    <table class="transactions-table">
                        <thead>
                            <tr>
                                <th>Data</th>
                                <th>Categoria</th>
                                <th>Nota</th>
                                <th>Valor</th>
                                <th>Ações</th>
                            </tr>
                        </thead>
                        <tbody id="transactionsTableBody">
                            <!-- Transactions will be rendered here -->
                        </tbody>
                    </table>
                    <div class="empty-state" id="emptyTransactions">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
                            <path
                                d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2" />
                        </svg>
                        <p>Nenhuma transação registrada</p>
                        <button class="btn btn-primary" id="addFirstTransaction">Adicionar Primeira Transação</button>
                    </div>
                </div>
            </section>

            <!-- Categories Section -->
            <section class="section" id="categoriesSection">
                <div class="section-header">
                    <h2 class="section-title">Categorias</h2>
                </div>

                <div class="categories-container">
                    <div class="category-group">
                        <h3 class="category-group-title income">
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <line x1="12" y1="19" x2="12" y2="5" />
                                <polyline points="5 12 12 5 19 12" />
                            </svg>
                            Categorias de Receita
                        </h3>
                        <div class="category-list" id="incomeCategoriesList">
                            <!-- Income categories will be rendered here -->
                        </div>
                        <div class="add-category-form">
                            <input type="text" id="newIncomeCategory" placeholder="Nova categoria" class="text-input">
                            <button class="btn btn-secondary" id="addIncomeCategory">
                                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <line x1="12" y1="5" x2="12" y2="19" />
                                    <line x1="5" y1="12" x2="19" y2="12" />
                                </svg>
                            </button>
                        </div>
                    </div>

                    <div class="category-group">
                        <h3 class="category-group-title expense">
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <line x1="12" y1="5" x2="12" y2="19" />
                                <polyline points="19 12 12 19 5 12" />
                            </svg>
                            Categorias de Despesa
                        </h3>
                        <div class="category-list" id="expenseCategoriesList">
                            <!-- Expense categories will be rendered here -->
                        </div>
                        <div class="add-category-form">
                            <input type="text" id="newExpenseCategory" placeholder="Nova categoria" class="text-input">
                            <button class="btn btn-secondary" id="addExpenseCategory">
                                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <line x1="12" y1="5" x2="12" y2="19" />
                                    <line x1="5" y1="12" x2="19" y2="12" />
                                </svg>
                            </button>
                        </div>
                    </div>
                </div>

                <div class="category-summary">
                    <h3 class="subsection-title">Resumo por Categoria (Este Mês)</h3>
                    <div class="category-summary-list" id="categorySummary">
                        <!-- Category summary will be rendered here -->
                    </div>
                </div>
            </section>

            <!-- Budgets Section -->
            <section class="section" id="budgetsSection">
                <div class="section-header">
                    <h2 class="section-title">Metas de Orçamento</h2>
                </div>

                <div class="budgets-info">
                    <p>Defina limites mensais para suas categorias de despesa e acompanhe seu progresso.</p>
                </div>

                <div class="budgets-container">
                    <div class="budget-form-card">
                        <h3 class="subsection-title">Definir Meta</h3>
                        <div class="budget-form">
                            <div class="form-group">
                                <label class="form-label" for="budgetCategory">Categoria</label>
                                <select id="budgetCategory" class="select-input">
                                    <!-- Categories will be populated -->
                                </select>
                            </div>
                            <div class="form-group">
                                <label class="form-label" for="budgetAmount">Limite Mensal (CVE $)</label>
                                <input type="number" id="budgetAmount" class="text-input" step="100" min="0"
                                    placeholder="0">
                            </div>
                            <button class="btn btn-primary" id="saveBudgetBtn">Definir Meta</button>
                        </div>
                    </div>

                    <div class="budget-list-card">
                        <h3 class="subsection-title">Metas Ativas</h3>
                        <div class="budget-list" id="budgetList">
                            <!-- Budgets will be rendered here -->
                        </div>
                    </div>
                </div>
            </section>

            <!-- Wallets Section -->
            <section class="section" id="walletsSection">
                <div class="section-header">
                    <h2 class="section-title">Carteiras</h2>
                    <button class="btn btn-primary" id="addWalletBtn">+ Nova Carteira</button>
                </div>

                <!-- Currency Converter -->
                <div class="currency-converter-card">
                    <h3 class="subsection-title">Conversor CVE ⇄ EUR</h3>
                    <div class="converter-content">
                        <div class="converter-input">
                            <label>CVE $</label>
                            <input type="number" id="cveCurrency" class="text-input" placeholder="0,00">
                        </div>
                        <span class="converter-equals">=</span>
                        <div class="converter-input">
                            <label>EUR €</label>
                            <input type="number" id="eurCurrency" class="text-input" placeholder="0,00">
                        </div>
                    </div>
                    <p class="converter-rate">Taxa: 1 EUR = <span id="exchangeRate">110,265</span> CVE</p>
                </div>

                <!-- Wallet List -->
                <div class="wallets-grid" id="walletsList">
                    <!-- Wallets will be rendered here -->
                </div>

                <!-- Transfer Section -->
                <div class="transfer-card">
                    <h3 class="subsection-title">Transferir Entre Carteiras</h3>
                    <div class="transfer-form">
                        <div class="form-group">
                            <label class="form-label">De</label>
                            <select id="transferFrom" class="select-input"></select>
                        </div>
                        <div class="transfer-arrow">→</div>
                        <div class="form-group">
                            <label class="form-label">Para</label>
                            <select id="transferTo" class="select-input"></select>
                        </div>
                        <div class="form-group">
                            <label class="form-label">Valor (CVE $)</label>
                            <input type="number" id="transferAmount" class="text-input" step="100" min="1">
                        </div>
                        <button class="btn btn-primary" id="transferBtn">Transferir</button>
                    </div>
                </div>
            </section>

            <!-- Calendar Section -->
            <section class="section" id="calendarSection">
                <div class="section-header">
                    <h2 class="section-title">Calendário</h2>
                    <div class="calendar-nav">
                        <button class="month-nav prev" id="calPrevMonth" aria-label="Mês anterior">
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <polyline points="15 18 9 12 15 6" />
                            </svg>
                        </button>
                        <span class="current-month" id="calCurrentMonth">Janeiro 2026</span>
                        <button class="month-nav next" id="calNextMonth" aria-label="Próximo mês">
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <polyline points="9 18 15 12 9 6" />
                            </svg>
                        </button>
                    </div>
                </div>

                <div class="calendar-container">
                    <!-- Calendar Grid -->
                    <div class="calendar-grid-wrapper">
                        <div class="calendar-weekdays">
                            <span>Dom</span>
                            <span>Seg</span>
                            <span>Ter</span>
                            <span>Qua</span>
                            <span>Qui</span>
                            <span>Sex</span>
                            <span>Sáb</span>
                        </div>
                        <div class="calendar-grid" id="calendarGrid">
                            <!-- Days will be rendered here -->
                        </div>
                    </div>

                    <!-- Day Details Panel -->
                    <div class="calendar-details" id="calendarDetails">
                        <h3 class="subsection-title" id="selectedDateTitle">Selecione um dia</h3>
                        <div class="day-transactions" id="dayTransactions">
                            <p class="empty-hint">Clique em um dia para ver as transações</p>
                        </div>
                        <div class="day-summary" id="daySummary"></div>
                    </div>
                </div>

                <!-- Month Summary -->
                <div class="calendar-month-summary">
                    <div class="summary-item income">
                        <span class="summary-label">Receitas do Mês</span>
                        <span class="summary-value" id="calMonthIncome">0,00 $</span>
                    </div>
                    <div class="summary-item expense">
                        <span class="summary-label">Despesas do Mês</span>
                        <span class="summary-value" id="calMonthExpense">0,00 $</span>
                    </div>
                    <div class="summary-item balance">
                        <span class="summary-label">Saldo do Mês</span>
                        <span class="summary-value" id="calMonthBalance">0,00 $</span>
                    </div>
                </div>
            </section>
        </main>
    </div>

    <!-- Transaction Modal -->
    <div class="modal-overlay" id="transactionModal">
        <div class="modal">
            <div class="modal-header">
                <h3 class="modal-title" id="modalTitle">Nova Transação</h3>
                <button class="modal-close" id="closeModal" aria-label="Fechar">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <line x1="18" y1="6" x2="6" y2="18" />
                        <line x1="6" y1="6" x2="18" y2="18" />
                    </svg>
                </button>
            </div>
            <form id="transactionForm">
                <input type="hidden" id="transactionId">

                <div class="form-group">
                    <label class="form-label">Tipo</label>
                    <div class="radio-group">
                        <label class="radio-option income">
                            <input type="radio" name="type" value="income" checked>
                            <span class="radio-label">Receita</span>
                        </label>
                        <label class="radio-option expense">
                            <input type="radio" name="type" value="expense">
                            <span class="radio-label">Despesa</span>
                        </label>
                    </div>
                </div>

                <div class="form-group">
                    <label class="form-label" for="amount">Valor (CVE $)</label>
                    <input type="number" id="amount" class="text-input" step="0.01" min="0.01" required
                        placeholder="0,00">
                </div>

                <div class="form-group">
                    <label class="form-label" for="category">Categoria</label>
                    <select id="category" class="select-input" required>
                        <!-- Categories will be populated dynamically -->
                    </select>
                </div>

                <div class="form-group">
                    <label class="form-label" for="date">Data</label>
                    <input type="date" id="date" class="text-input" required>
                </div>

                <div class="form-group">
                    <label class="form-label" for="note">Nota (opcional)</label>
                    <textarea id="note" class="text-input textarea" placeholder="Adicionar nota..."></textarea>
                </div>

                <div class="form-group recurring-group">
                    <label class="checkbox-label">
                        <input type="checkbox" id="isRecurring">
                        <span class="checkbox-text">Transação Recorrente</span>
                    </label>
                    <div class="recurring-options" id="recurringOptions" style="display: none;">
                        <select id="frequency" class="select-input">
                            <option value="monthly">Mensal</option>
                            <option value="weekly">Semanal</option>
                            <option value="biweekly">Quinzenal</option>
                        </select>
                    </div>
                </div>

                <div class="form-actions">
                    <button type="button" class="btn btn-secondary" id="cancelTransaction">Cancelar</button>
                    <button type="submit" class="btn btn-primary" id="saveTransaction">Guardar</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Delete Confirmation Modal -->
    <div class="modal-overlay" id="deleteModal">
        <div class="modal modal-small">
            <div class="modal-header">
                <h3 class="modal-title">Confirmar Exclusão</h3>
                <button class="modal-close" id="closeDeleteModal" aria-label="Fechar">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <line x1="18" y1="6" x2="6" y2="18" />
                        <line x1="6" y1="6" x2="18" y2="18" />
                    </svg>
                </button>
            </div>
            <p class="modal-message">Tem certeza que deseja excluir esta transação?</p>
            <div class="form-actions">
                <button class="btn btn-secondary" id="cancelDelete">Cancelar</button>
                <button class="btn btn-danger" id="confirmDelete">Excluir</button>
            </div>
        </div>
    </div>

    <!-- Toast Notification -->
    <div class="toast" id="toast">
        <span class="toast-message" id="toastMessage"></span>
    </div>

    <!-- Overlay for mobile sidebar -->
    <div class="sidebar-overlay" id="sidebarOverlay"></div>

    <script src="js/data.js"></script>
    <script src="js/charts.js"></script>
    <script src="js/ui.js"></script>
    <script src="js/app.js"></script>
    <script>
        // Register Service Worker for PWA
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', () => {
                navigator.serviceWorker.register('/sw.js')
                    .then(reg => console.log('Service Worker registered'))
                    .catch(err => console.log('Service Worker registration failed:', err));
            });
        }
    </script>
</body>

</html>